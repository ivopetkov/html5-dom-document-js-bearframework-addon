<?php

/*
 * HTML5 DOM Document JS addon for Bear Framework
 * https://github.com/ivopetkov/html5-dom-document-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var html5DOMDocument=function(){var d=0,m=function(f,a){for(var b=f.querySelectorAll("script"),g=b.length,e=0;e<g;e++)b[e].setAttribute("data-html5-dom-document-script-"+a,"1")},l=function(f,a){for(var b=f.querySelectorAll("[data-html5-dom-document-script-"+a+"]"),g=b.length,e=0;e<g;e++){var c=!1,h=b[e];h.removeAttribute("data-html5-dom-document-script-"+a);var d=document.createElement("script"),k=h.getAttribute("type");null!==k&&d.setAttribute("type",k);k=h.getAttribute("src");null!==k&&(d.setAttribute("src",k),k=h.getAttribute("async"),(null===k||"false"===k)&&e+1<g&&(c=!0,d.addEventListener("load",function(){l(f,a)})));d.innerHTML=h.innerHTML;h.parentNode.insertBefore(d,h);h.parentNode.removeChild(h);if(c)break}};return{insert:function(f,a){"undefined"===typeof a&&(a="beforeBodyEnd");d++;var b=document.createElement("html");b.innerHTML=f;m(b,d);for(var g=b.querySelectorAll("head"),e=g.length,c=0;c<e;c++)document.head.insertAdjacentHTML("beforeend",g[c].innerHTML);b=b.querySelectorAll("body");g=b.length;for(c=0;c<g;c++)"afterBodyBegin"===a?document.body.insertAdjacentHTML("afterbegin",b[c].innerHTML):"beforeBodyEnd"===a?document.body.insertAdjacentHTML("beforeend",b[c].innerHTML):"object"===typeof a&&"undefined"!==typeof a[0]&&("undefined"===typeof a[1]&&(a[1]="innerHTML"),"innerHTML"===a[1]?a[0].innerHTML=b[c].innerHTML:"outerHTML"===a[1]?a[0].outerHTML=b[c].innerHTML:"beforeBegin"===a[1]?a[0].insertAdjacentHTML("beforebegin",b[c].innerHTML):"afterBegin"===a[1]?a[0].insertAdjacentHTML("afterend",b[c].innerHTML):"beforeEnd"===a[1]?a[0].insertAdjacentHTML("beforeend",b[c].innerHTML):"afterEnd"===a[1]&&a[0].insertAdjacentHTML("afterend",b[c].innerHTML));l(document,d)},evalElement:function(f){d++;m(f,d);l(f,d)}}}();
EOT;
