<?php

/*
 * HTML5 DOM Document JS addon for Bear Framework
 * https://github.com/ivopetkov/html5-dom-document-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var html5DOMDocument=void 0!==html5DOMDocument?html5DOMDocument:function(){var e=0,t=function(e,t){for(var n=e.querySelectorAll("script"),r=n.length,o=0;o<r;o++)n[o].setAttribute("data-html5-dom-document-script-"+t,"1")},n=function(e,t){for(var r=e.querySelectorAll("[data-html5-dom-document-script-"+t+"]"),o=r.length,i=0;i<o;i++){var d=!1,a=r[i];a.removeAttribute("data-html5-dom-document-script-"+t);var l=(9===e.nodeType?e:e.ownerDocument).createElement("script"),u=a.getAttribute("type");null!==u&&l.setAttribute("type",u);var c=a.getAttribute("src");if(null!==c){l.setAttribute("src",c);var f=a.getAttribute("async");(null===f||"false"===f)&&i+1<o&&(d=!0,l.addEventListener("load",(function(){n(e,t)})))}if(l.innerHTML=a.innerHTML,a.parentNode.insertBefore(l,a),a.parentNode.removeChild(a),d)break}};return{insert:function(r,o){void 0===o&&(o="beforeBodyEnd"),e++;var i=(new DOMParser).parseFromString(r,"text/html"),d=document;"object"==typeof o&&void 0!==o[0]&&void 0!==o[1]&&("afterBodyBegin"!==o[1]&&"beforeBodyEnd"!==o[1]||(d=o[0],o=o[1]));var a=function(e,t){for(var n=e.attributes,r=n.length,o=0;o<r;o++){var i=n[o];t.setAttribute(i.name,i.value)}};t(i,e);var l=i.querySelector("html"),u=d.querySelector("html");null!==l&&null!==u&&a(l,u);var c=i.querySelector("head");null!==c&&(a(c,d.head),d.head.insertAdjacentHTML("beforeend",c.innerHTML));var f=i.querySelector("body");null!==f&&(a(f,d.body),"afterBodyBegin"===o?d.body.insertAdjacentHTML("afterbegin",f.innerHTML):"beforeBodyEnd"===o?d.body.insertAdjacentHTML("beforeend",f.innerHTML):"object"==typeof o&&void 0!==o[0]&&(void 0===o[1]&&(o[1]="innerHTML"),"innerHTML"===o[1]?o[0].innerHTML=f.innerHTML:"outerHTML"===o[1]?o[0].outerHTML=f.innerHTML:"beforeBegin"===o[1]?o[0].insertAdjacentHTML("beforebegin",f.innerHTML):"afterBegin"===o[1]?o[0].insertAdjacentHTML("afterend",f.innerHTML):"beforeEnd"===o[1]?o[0].insertAdjacentHTML("beforeend",f.innerHTML):"afterEnd"===o[1]&&o[0].insertAdjacentHTML("afterend",f.innerHTML))),n(document,e)},evalElement:function(r){e++,t(r,e),n(r,e)}}}();
EOT;
