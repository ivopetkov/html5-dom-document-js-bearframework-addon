<?php

/*
 * HTML5 DOM Document JS addon for Bear Framework
 * https://github.com/ivopetkov/html5-dom-document-js-bearframework-addon
 * Copyright (c) Ivo Petkov
 * Free to use under the MIT license.
 */

return <<<'EOT'
var html5DOMDocument=void 0!==html5DOMDocument?html5DOMDocument:function(){var e=0,t=function(e,t){for(var n=e.querySelectorAll("script"),r=n.length,o=0;o<r;o++)n[o].setAttribute("data-html5-dom-document-script-"+t,"1")},n=function(e,t){for(var r=e.querySelectorAll("[data-html5-dom-document-script-"+t+"]"),o=r.length,i=0;i<o;i++){var d=!1,a=r[i];a.removeAttribute("data-html5-dom-document-script-"+t);var u=document.createElement("script"),c=a.getAttribute("type");null!==c&&u.setAttribute("type",c);var l=a.getAttribute("src");if(null!==l){u.setAttribute("src",l);var m=a.getAttribute("async");(null===m||"false"===m)&&i+1<o&&(d=!0,u.addEventListener("load",(function(){n(e,t)})))}if(u.innerHTML=a.innerHTML,a.parentNode.insertBefore(u,a),a.parentNode.removeChild(a),d)break}};return{insert:function(r,o){void 0===o&&(o="beforeBodyEnd"),e++;var i=(new DOMParser).parseFromString(r,"text/html"),d=function(e,t){for(var n=e.attributes,r=n.length,o=0;o<r;o++){var i=n[o];t.setAttribute(i.name,i.value)}};t(i,e);var a=i.querySelector("html"),u=document.querySelector("html");null!==a&&null!==u&&d(a,u);var c=i.querySelector("head");null!==c&&(d(c,document.head),document.head.insertAdjacentHTML("beforeend",c.innerHTML));var l=i.querySelector("body");null!==l&&(d(l,document.body),"afterBodyBegin"===o?document.body.insertAdjacentHTML("afterbegin",l.innerHTML):"beforeBodyEnd"===o?document.body.insertAdjacentHTML("beforeend",l.innerHTML):"object"==typeof o&&void 0!==o[0]&&(void 0===o[1]&&(o[1]="innerHTML"),"innerHTML"===o[1]?o[0].innerHTML=l.innerHTML:"outerHTML"===o[1]?o[0].outerHTML=l.innerHTML:"beforeBegin"===o[1]?o[0].insertAdjacentHTML("beforebegin",l.innerHTML):"afterBegin"===o[1]?o[0].insertAdjacentHTML("afterend",l.innerHTML):"beforeEnd"===o[1]?o[0].insertAdjacentHTML("beforeend",l.innerHTML):"afterEnd"===o[1]&&o[0].insertAdjacentHTML("afterend",l.innerHTML))),n(document,e)},evalElement:function(r){e++,t(r,e),n(r,e)}}}();
EOT;
